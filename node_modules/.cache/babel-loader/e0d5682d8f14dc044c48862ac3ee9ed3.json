{"ast":null,"code":"var _jsxFileName = \"/Users/miclaude/Desktop/Hypertube/src/containers/Profil/MyInfo/PhotoUser/PhotoUser.jsx\";\nimport React, { Component } from 'react';\nimport * as actions from '../../../../store/actions/index';\nimport firebase from '../../../../fire';\nimport './PhotoUser.css';\nlet id = localStorage.getItem('id');\nlet fileName = 'image';\nlet newDirectory = id;\nlet storage = firebase.storage().ref(`images/${newDirectory}/${fileName}`);\nlet photoSocial = localStorage.getItem('photo');\nlet photoPhone = localStorage.getItem('photoPhone');\n\nclass PhotoUser extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      image: null,\n      imageTmp: null,\n      good: false\n    };\n\n    this.handleChange = e => {\n      if (e.target.files[0]) {\n        if (e.target.files[0] !== this.state.image) {\n          this.setState({\n            imageTmp: e.target.files[0],\n            good: true\n          });\n        }\n      }\n    };\n\n    this.handleUpload = async () => {\n      if (this.state.good) {\n        if (this.state.image !== undefined) {\n          await storage.put(this.state.imageTmp).then(res => {// console.log(res)\n          }).catch(err => {// console.log(err)\n          });\n        }\n\n        await storage.getDownloadURL().then(function (url) {\n          // photoProfil(url);\n          this.setState({\n            image: url,\n            good: false\n          });\n        }).catch(err => {// console.log(err)\n        });\n      }\n    };\n  }\n\n  componentDidMount() {\n    console.log(fileName);\n\n    if (localStorage.getItem('photo')) {\n      this.setState({\n        image: localStorage.getItem('photo')\n      }); // photoProfil(localStorage.getItem('photo'));\n    } else if (localStorage.getItem('photoPhone')) {\n      this.setState({\n        image: localStorage.getItem('photoPhone')\n      }); // photoProfil(localStorage.getItem('photoPhone'));\n    } else {\n      storage.getDownloadURL().then(function (url) {\n        if (url) {\n          this.setState({\n            image: url\n          }); // photoProfil(url);\n          // setImage(url);\n        }\n      }).catch(err => {// setImage('https://lebackyard.fr/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png');\n      });\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"BlockContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"TitleBackground\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"h4\", {\n      className: \"h4\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 21\n      }\n    }, \"Photo de Profil\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"BlockImageProfil\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: this.state.image,\n      className: \"ImgProfil\",\n      alt: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 21\n      }\n    }), !photoSocial && !photoPhone && /*#__PURE__*/React.createElement(\"div\", {\n      className: \"BlockButton\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"input\", {\n      style: {\n        color: 'black',\n        cursor: 'pointer'\n      },\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: this.handleChange,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 25\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"ButtonUpload\",\n      onClick: this.handleUpload,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 25\n      }\n    }, \"Upload\"))));\n  }\n\n}\n\nexport default PhotoUser;","map":{"version":3,"sources":["/Users/miclaude/Desktop/Hypertube/src/containers/Profil/MyInfo/PhotoUser/PhotoUser.jsx"],"names":["React","Component","actions","firebase","id","localStorage","getItem","fileName","newDirectory","storage","ref","photoSocial","photoPhone","PhotoUser","state","image","imageTmp","good","handleChange","e","target","files","setState","handleUpload","undefined","put","then","res","catch","err","getDownloadURL","url","componentDidMount","console","log","render","color","cursor"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport * as actions from '../../../../store/actions/index';\nimport firebase from '../../../../fire';\nimport './PhotoUser.css';\n\nlet id = localStorage.getItem('id');\nlet fileName = 'image';\nlet newDirectory = id;\nlet storage = firebase.storage().ref(`images/${newDirectory}/${fileName}`);\n\nlet photoSocial = localStorage.getItem('photo');\nlet photoPhone = localStorage.getItem('photoPhone');\n\nclass PhotoUser extends Component {\n    state = {\n        image: null,\n        imageTmp: null,\n        good: false\n    }\n\n    componentDidMount() {\n        console.log(fileName)\n        if (localStorage.getItem('photo')) {\n            this.setState({image : localStorage.getItem('photo')})\n            // photoProfil(localStorage.getItem('photo'));\n        }\n        else if (localStorage.getItem('photoPhone')){\n            this.setState({image : localStorage.getItem('photoPhone')})\n            // photoProfil(localStorage.getItem('photoPhone'));\n        }\n        else {\n            storage.getDownloadURL()\n                .then(function(url) {\n                    if (url) {\n                        this.setState({image: url});\n\n                        // photoProfil(url);\n                        // setImage(url);\n                    }\n                })\n                .catch(err => {\n                    // setImage('https://lebackyard.fr/wp-content/plugins/all-in-one-seo-pack/images/default-user-image.png');\n                })\n        }\n    }\n\n\n    handleChange = (e) => {\n        if (e.target.files[0]) {\n            if (e.target.files[0] !== this.state.image ) {\n                this.setState({imageTmp: e.target.files[0], good: true})\n            }            \n        }         \n    };\n    \n    handleUpload = async () => {\n        if(this.state.good) {\n            if (this.state.image !== undefined) {\n                await storage.put(this.state.imageTmp)\n                    .then(res => { \n                       // console.log(res)\n                    })\n                    .catch(err => {\n                        // console.log(err)\n                    })\n            }\n            await storage.getDownloadURL()\n                .then(function(url) {\n                    // photoProfil(url);\n                    this.setState({image:url, good: false})            \n                })\n                .catch(err => {\n                    // console.log(err)\n                })\n        }        \n    }\n    render () {\n        return (\n            <div className=\"BlockContainer\">\n                <div className=\"TitleBackground\">\n                    <h4 className='h4'>Photo de Profil</h4>\n                </div>\n                <div className=\"BlockImageProfil\">\n                    <img src={this.state.image} className='ImgProfil'alt=''/>\n                    { (!photoSocial && !photoPhone) && \n                    <div className=\"BlockButton\">\n                        <input style={{color:'black', cursor:'pointer'}} type='file' accept=\"image/*\" onChange={this.handleChange} />\n                        <button className=\"ButtonUpload\" onClick={this.handleUpload}>Upload</button>\n                    </div> }    \n                </div>\n            </div>\n        )\n    }\n}\n\nexport default PhotoUser;"]},"metadata":{},"sourceType":"module"}