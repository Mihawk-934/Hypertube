{"ast":null,"code":"var _jsxFileName = \"/Users/miclaude/Desktop/Netflix/src/containers/Profil/MyInfo/PhotoUser/PhotoUser.jsx\";\nimport React, { useState, useEffect } from 'react'; // import { MdAddAPhoto } from 'react-icons/md';\n\nimport '../MyInfo.css';\nimport './PhotoUser.css';\nimport { useDispatch } from 'react-redux';\nimport * as actions from '../../../../store/actions/index';\nimport firebase from '../../../../fire';\n\nconst PhotoUser = () => {\n  let id = localStorage.getItem('id');\n  let fileName = 'image';\n  let newDirectory = id;\n  let storage = firebase.storage().ref(`images/${newDirectory}/${fileName}`);\n  const [image, setImage] = useState(null);\n  const [imageTmp, setImageTmp] = useState(null);\n  const [good, setGood] = useState(false);\n  const dispatch = useDispatch();\n\n  const photoProfil = image => dispatch(actions.photoUrl(image));\n\n  let photoSocial = localStorage.getItem('photo');\n  let photoPhone = localStorage.getItem('photoPhone');\n  useEffect(() => {\n    if (localStorage.getItem('photo')) {\n      console.log('[1]');\n      setImage(localStorage.getItem('photo'));\n      photoProfil(localStorage.getItem('photo'));\n    } else if (localStorage.getItem('photoPhone')) {\n      console.log('[2]');\n      setImage(localStorage.getItem('photoPhone'));\n      photoProfil(localStorage.getItem('photoPhone'));\n    } else {\n      console.log('[3]');\n      storage.getDownloadURL().then(function (url) {\n        if (url) {\n          photoProfil(url);\n          setImage(url);\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  }, []);\n\n  const handleChange = e => {\n    if (e.target.files[0]) {\n      if (e.target.files[0] !== image) {\n        setImageTmp(e.target.files[0]);\n        setGood(true);\n      }\n    }\n  };\n\n  const handleUpload = async () => {\n    if (good) {\n      if (image !== undefined) {\n        await storage.put(imageTmp).then(res => console.log(res)).catch(err => console.log(err));\n      }\n\n      await storage.getDownloadURL().then(function (url) {\n        photoProfil(url);\n        setImage(url);\n        setGood(false);\n      }).catch(err => {\n        console.log(err);\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"BlockContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"TitleBackground\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }\n  }, \"Photo de Profil\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"BlockImageProfil\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 13\n    }\n  }, image !== null ? /*#__PURE__*/React.createElement(\"img\", {\n    src: image,\n    alt: \"\",\n    style: {\n      height: '140px',\n      width: '140px',\n      borderRadius: '10px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 25\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      height: '140px',\n      width: '140px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 27\n    }\n  }), !photoSocial || !photoPhone && /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 58\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    style: {\n      color: 'black'\n    },\n    type: \"file\",\n    accept: \"image/*\",\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleUpload,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }, \"Upload\"))));\n};","map":{"version":3,"sources":["/Users/miclaude/Desktop/Netflix/src/containers/Profil/MyInfo/PhotoUser/PhotoUser.jsx"],"names":["React","useState","useEffect","useDispatch","actions","firebase","PhotoUser","id","localStorage","getItem","fileName","newDirectory","storage","ref","image","setImage","imageTmp","setImageTmp","good","setGood","dispatch","photoProfil","photoUrl","photoSocial","photoPhone","console","log","getDownloadURL","then","url","catch","err","handleChange","e","target","files","handleUpload","undefined","put","res","height","width","borderRadius","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\n// import { MdAddAPhoto } from 'react-icons/md';\nimport '../MyInfo.css';\nimport './PhotoUser.css';\nimport {useDispatch} from 'react-redux';\nimport * as actions from '../../../../store/actions/index';\nimport firebase from '../../../../fire';\n\nconst PhotoUser = () => {\n    let id = localStorage.getItem('id');\n    let fileName = 'image';\n    let newDirectory = id;\n    let storage = firebase.storage().ref(`images/${newDirectory}/${fileName}`);\n    \n    const [ image, setImage ] = useState(null);\n    const [ imageTmp, setImageTmp ] = useState(null);\n    const [ good, setGood ] = useState(false);\n\n    const dispatch = useDispatch();\n    const photoProfil = (image) => dispatch(actions.photoUrl(image))\n\n    let photoSocial = localStorage.getItem('photo');\n    let photoPhone = localStorage.getItem('photoPhone');\n\n    useEffect (() => {\n        if (localStorage.getItem('photo')) {\n            console.log('[1]')\n            setImage(localStorage.getItem('photo')) \n            photoProfil(localStorage.getItem('photo'));\n        }\n        else if (localStorage.getItem('photoPhone')){\n            console.log('[2]')\n            setImage(localStorage.getItem('photoPhone')) \n            photoProfil(localStorage.getItem('photoPhone'));\n        }\n        else {\n            console.log('[3]')\n            storage.getDownloadURL()\n                .then(function(url) {\n                    if (url) {\n                        photoProfil(url);\n                        setImage(url);\n                    }\n                })\n                .catch(err => {\n                    console.log(err)\n                })\n        }\n    }, [])\n\n    const handleChange = (e) => {\n        if (e.target.files[0]) {\n            if (e.target.files[0] !== image ) {\n                setImageTmp(e.target.files[0]);\n                setGood(true);\n            }            \n        }         \n    };\n    \n    const handleUpload = async () => {\n        if(good) {\n            if (image !== undefined) {\n                await storage.put(imageTmp)\n                    .then(res => console.log(res))\n                    .catch(err => console.log(err))\n            }\n            await storage.getDownloadURL()\n                .then(function(url) {\n                    photoProfil(url);\n                    setImage(url);\n                    setGood(false);                \n                })\n                .catch(err => {\n                    console.log(err)\n                })\n        }        \n    }\n\n    return (\n        <div className=\"BlockContainer\">\n            <div className=\"TitleBackground\">\n                <h4 className='h4'>Photo de Profil</h4>\n            </div>\n            <div className=\"BlockImageProfil\">\n                {/* <img src={Img} className='ImgProfil'alt=''/>\n                <div className='BlockLogo'>\n                    <MdAddAPhoto className='LogoAdd'/>\n                </div> */}\n                 { image !== null ? \n                        <img src={image} alt='' style={{height:'140px', width:'140px',borderRadius:'10px'}}/>\n                        : <div style={{height:'140px', width:'140px'}}/>}\n                        { !photoSocial || !photoPhone && <div>\n                            <input style={{color:'black'}}type='file' accept=\"image/*\" onChange={handleChange}  /> \n                            <button onClick={handleUpload}>Upload</button>\n                        </div> }    \n            </div>\n        </div>\n    )\n}\n         "]},"metadata":{},"sourceType":"module"}