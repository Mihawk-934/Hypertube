{"ast":null,"code":"var _jsxFileName = \"/Users/miclaude/Desktop/N/src/containers/Profil/MyInfo/InfoUser/Mail/Mail.jsx\";\nimport React, { useEffect, useState } from 'react';\nimport MyButton from '../../../../../components/MyButton/MyButton';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst InfoUser = () => {\n  const [id, setId] = useState('');\n  const [idToken, setIdToken] = useState('');\n  const [mail, setMail] = useState('');\n  useEffect(() => {\n    if (mail.length === 0) setMail(localStorage.getItem('email'));\n    setIdToken(localStorage.getItem('token'));\n    setId(localStorage.getItem('id'));\n    let idLocal = localStorage.getItem('id');\n    axios.get(`https://movies-27cd5.firebaseio.com/${idLocal}/mail.json/`).then(response => {\n      setMail(response.data.mail);\n    }).catch(err => {//  console.log(err)\n    });\n  }, [mail.length]);\n\n  const handleSubmitMail = e => {\n    e.preventDefault();\n    const authData = {\n      idToken: idToken,\n      email: mail,\n      returnSecureToken: true\n    };\n    axios.post('https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyDJQ2C-WHsJXu5xVCG5Z98XQ31gRJrSV_E', authData).then(response => {\n      console.log('[1]', response);\n      const mail = {\n        mail: response.data.email\n      };\n      axios.put(`https://movies-27cd5.firebaseio.com/${id}/mail.json/`, mail).then(res => {\n        console.log(res);\n        toast.success('Info perso mise Ã  jour.', {\n          autoClose: 3000,\n          closeButton: false,\n          className: \"toastCss\"\n        });\n      }).catch(err => {\n        toast.error('Erreur, veuillez ressayer plus tard ðŸ˜®.', {\n          autoClose: 3000,\n          closeButton: false,\n          className: \"toastCss\"\n        });\n      });\n    }).catch(err => {\n      toast.error('Erreur, veuillez ressayer plus tard ðŸ˜®.', {\n        autoClose: 3000,\n        closeButton: false,\n        className: \"toastCss\"\n      });\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"BlockContainer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"TitleBackground\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"h4\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 17\n    }\n  }, \"Informations Personelles\")), /*#__PURE__*/React.createElement(\"form\", {\n    onSubmit: handleSubmitMail,\n    className: \"BlockUserInfo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"Duo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    className: \"Input\",\n    type: \"mail\",\n    id: \"mail\",\n    placeholder: \"Mail\",\n    minLength: \"6\",\n    value: mail,\n    pattern: \"[a-z0-9._%+-]+@[a-z0-9.-]+\\\\.[a-z]{2,}$\",\n    title: \"email incorrect ex: netflix@gmail.com\",\n    onChange: e => setMail(e.target.value),\n    required: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 21\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '200px'\n    },\n    className: \"Duo\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(MyButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 21\n    }\n  }))));\n};\n\nexport default InfoUser;","map":{"version":3,"sources":["/Users/miclaude/Desktop/N/src/containers/Profil/MyInfo/InfoUser/Mail/Mail.jsx"],"names":["React","useEffect","useState","MyButton","axios","toast","InfoUser","id","setId","idToken","setIdToken","mail","setMail","length","localStorage","getItem","idLocal","get","then","response","data","catch","err","handleSubmitMail","e","preventDefault","authData","email","returnSecureToken","post","console","log","put","res","success","autoClose","closeButton","className","error","target","value","width"],"mappings":"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","sourcesContent":["import React, { useEffect, useState }  from 'react';\nimport MyButton from '../../../../../components/MyButton/MyButton';\nimport axios from 'axios';\nimport { toast } from 'react-toastify';\n\nconst InfoUser = () => {\n    const [id, setId] = useState('');\n    const [idToken, setIdToken] = useState('');\n    const [mail, setMail] = useState('');\n\n    useEffect(() => {\n        if (mail.length === 0)\n            setMail(localStorage.getItem('email'))\n        setIdToken(localStorage.getItem('token'));\n        setId(localStorage.getItem('id'));\n        let idLocal = localStorage.getItem('id');\n        axios.get(`https://movies-27cd5.firebaseio.com/${idLocal}/mail.json/`)\n            .then(response => { \n                setMail(response.data.mail) \n            })\n            .catch(err => { \n                //  console.log(err)\n            })\n    },[mail.length]) \n \n    const handleSubmitMail = (e) => {\n        e.preventDefault(); \n        const authData = {\n            idToken:idToken,\n            email: mail,\n            returnSecureToken: true\n        };\n        axios.post('https://identitytoolkit.googleapis.com/v1/accounts:update?key=AIzaSyDJQ2C-WHsJXu5xVCG5Z98XQ31gRJrSV_E', authData)\n            .then(response => { \n                console.log('[1]', response)\n                const mail = { mail : response.data.email };\n                axios.put(`https://movies-27cd5.firebaseio.com/${id}/mail.json/`, mail)\n                    .then(res => {  \n                        console.log(res)\n                        toast.success('Info perso mise Ã  jour.', {\n                            autoClose: 3000,\n                            closeButton: false,\n                            className: \"toastCss\"\n                        })\n                    })\n                    .catch(err => { \n                        toast.error('Erreur, veuillez ressayer plus tard ðŸ˜®.', {\n                            autoClose: 3000,\n                            closeButton: false,\n                            className: \"toastCss\"\n                        })\n                    })\n            })\n            .catch(err => {\n                toast.error('Erreur, veuillez ressayer plus tard ðŸ˜®.', {\n                    autoClose: 3000,\n                    closeButton: false,\n                    className: \"toastCss\"\n                })\n            })      \n    }\n \n    return (\n        <div className=\"BlockContainer\">\n            <div className=\"TitleBackground\">\n                <h4 className='h4'>Informations Personelles</h4>\n            </div>\n            <form onSubmit={handleSubmitMail} className=\"BlockUserInfo\">\n                <div className='Duo'>\n                    <input className='Input' type=\"mail\" id=\"mail\" placeholder=\"Mail\" \n                        minLength=\"6\" value={mail} pattern=\"[a-z0-9._%+-]+@[a-z0-9.-]+\\.[a-z]{2,}$\" title=\"email incorrect ex: netflix@gmail.com\"\n                        onChange={(e)=> setMail(e.target.value)} required />\n                </div>\n                <div style={{width: '200px'}} className='Duo'>\n                    <MyButton />\n                </div>\n            </form>\n        </div> \n    )\n}\n\nexport default InfoUser; "]},"metadata":{},"sourceType":"module"}